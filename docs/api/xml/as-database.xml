<?xml version="1.0"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
               "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd"
[
  <!ENTITY % local.common.attrib "xmlns:xi  CDATA  #FIXED 'http://www.w3.org/2003/XInclude'">
]>
<refentry id="AsDatabase">
<refmeta>
<refentrytitle role="top_of_page" id="AsDatabase.top_of_page">AsDatabase</refentrytitle>
<manvolnum>3</manvolnum>
<refmiscinfo>
  APPSTREAM Library
</refmiscinfo>
</refmeta>
<refnamediv>
<refname>AsDatabase</refname>
<refpurpose>Read-only access to the Appstream component database</refpurpose>
</refnamediv>

<refsect1 id="AsDatabase.functions" role="functions_proto">
<title role="functions_proto.title">Functions</title>
<informaltable pgwide="1" frame="none">
<tgroup cols="2">
<colspec colname="functions_return" colwidth="150px"/>
<colspec colname="functions_name"/>
<tbody>
<row><entry role="function_type"><link linkend="AsDatabase"><returnvalue>AsDatabase</returnvalue></link>&#160;*
</entry><entry role="function_name"><link linkend="as-database-new">as_database_new</link>&#160;<phrase role="c_punctuation">()</phrase></entry></row>
<row><entry role="function_type"><link linkend="AsDatabase"><returnvalue>AsDatabase</returnvalue></link>&#160;*
</entry><entry role="function_name"><link linkend="as-database-construct">as_database_construct</link>&#160;<phrase role="c_punctuation">()</phrase></entry></row>
<row><entry role="function_type"><link linkend="void"><returnvalue>void</returnvalue></link>
</entry><entry role="function_name"><link linkend="as-database-set-database-path">as_database_set_database_path</link>&#160;<phrase role="c_punctuation">()</phrase></entry></row>
<row><entry role="function_type"><link linkend="gboolean"><returnvalue>gboolean</returnvalue></link>
</entry><entry role="function_name"><link linkend="as-database-open">as_database_open</link>&#160;<phrase role="c_punctuation">()</phrase></entry></row>
<row><entry role="function_type">const <link linkend="gchar"><returnvalue>gchar</returnvalue></link>&#160;*
</entry><entry role="function_name"><link linkend="as-database-get-database-path">as_database_get_database_path</link>&#160;<phrase role="c_punctuation">()</phrase></entry></row>
<row><entry role="function_type"><link linkend="gboolean"><returnvalue>gboolean</returnvalue></link>
</entry><entry role="function_name"><link linkend="as-database-db-exists">as_database_db_exists</link>&#160;<phrase role="c_punctuation">()</phrase></entry></row>
<row><entry role="function_type"><link linkend="GPtrArray"><returnvalue>GPtrArray</returnvalue></link>&#160;*
</entry><entry role="function_name"><link linkend="as-database-get-all-components">as_database_get_all_components</link>&#160;<phrase role="c_punctuation">()</phrase></entry></row>
<row><entry role="function_type"><link linkend="GPtrArray"><returnvalue>GPtrArray</returnvalue></link>&#160;*
</entry><entry role="function_name"><link linkend="as-database-find-components">as_database_find_components</link>&#160;<phrase role="c_punctuation">()</phrase></entry></row>
<row><entry role="function_type"><link linkend="GPtrArray"><returnvalue>GPtrArray</returnvalue></link>&#160;*
</entry><entry role="function_name"><link linkend="as-database-find-components-by-term">as_database_find_components_by_term</link>&#160;<phrase role="c_punctuation">()</phrase></entry></row>
<row><entry role="function_type"><link linkend="AsComponent"><returnvalue>AsComponent</returnvalue></link>&#160;*
</entry><entry role="function_name"><link linkend="as-database-get-component-by-id">as_database_get_component_by_id</link>&#160;<phrase role="c_punctuation">()</phrase></entry></row>
<row><entry role="function_type"><link linkend="GPtrArray"><returnvalue>GPtrArray</returnvalue></link>&#160;*
</entry><entry role="function_name"><link linkend="as-database-get-components-by-provides">as_database_get_components_by_provides</link>&#160;<phrase role="c_punctuation">()</phrase></entry></row>
<row><entry role="function_type"><link linkend="GPtrArray"><returnvalue>GPtrArray</returnvalue></link>&#160;*
</entry><entry role="function_name"><link linkend="as-database-get-components-by-kind">as_database_get_components_by_kind</link>&#160;<phrase role="c_punctuation">()</phrase></entry></row>

</tbody>
</tgroup>
</informaltable>
</refsect1>
<refsect1 id="AsDatabase.properties" role="properties">
<title role="properties.title">Properties</title>
<informaltable frame="none">
<tgroup cols="3">
<colspec colname="properties_type" colwidth="150px"/>
<colspec colname="properties_name" colwidth="300px"/>
<colspec colname="properties_flags" colwidth="200px"/>
<tbody>
<row><entry role="property_type"><link linkend="gchar"><type>gchar</type></link>&#160;*</entry><entry role="property_name"><link linkend="AsDatabase--database-path">database-path</link></entry><entry role="property_flags">Read / Write</entry></row>

</tbody>
</tgroup>
</informaltable>
</refsect1>
<refsect1 id="AsDatabase.object-hierarchy" role="object_hierarchy">
<title role="object_hierarchy.title">Object Hierarchy</title>
<screen>    <link linkend="GObject">GObject</link>
    <phrase role="lineart">&#9584;&#9472;&#9472;</phrase> AsDatabase
</screen>
</refsect1>

<refsect1 id="AsDatabase.includes"><title>Includes</title><synopsis>#include &lt;appstream.h&gt;
</synopsis></refsect1>

<refsect1 id="AsDatabase.description" role="desc">
<title role="desc.title">Description</title>
<para>This object provides access to the Appstream Xapian database of available software components.
You can search for components using various criteria, as well as getting some information
about the data provided by this Appstream database.</para>
<para>See also: <link linkend="AsComponent"><type>AsComponent</type></link>, <link linkend="AsSearchQuery"><type>AsSearchQuery</type></link></para>

</refsect1>
<refsect1 id="AsDatabase.functions_details" role="details">
<title role="details.title">Functions</title>
<refsect2 id="as-database-new" role="function">
<title>as_database_new&#160;()</title>
<indexterm zone="as-database-new"><primary>as_database_new</primary></indexterm>
<programlisting language="C"><link linkend="AsDatabase"><returnvalue>AsDatabase</returnvalue></link>&#160;*
as_database_new (<parameter><type>void</type></parameter>);</programlisting>
<para>Creates a new <link linkend="AsDatabase"><type>AsDatabase</type></link>.</para>
<refsect3 role="returns">
<title>Returns</title>
<para> a new <link linkend="AsDatabase"><type>AsDatabase</type></link>. </para>
<para><emphasis role="annotation">[<acronym>transfer full</acronym>]</emphasis></para>
</refsect3></refsect2>
<refsect2 id="as-database-construct" role="function">
<title>as_database_construct&#160;()</title>
<indexterm zone="as-database-construct"><primary>as_database_construct</primary></indexterm>
<programlisting language="C"><link linkend="AsDatabase"><returnvalue>AsDatabase</returnvalue></link>&#160;*
as_database_construct (<parameter><link linkend="GType"><type>GType</type></link> object_type</parameter>);</programlisting>
<para>Construct a new <link linkend="AsDatabase"><type>AsDatabase</type></link>.</para>
<refsect3 role="returns">
<title>Returns</title>
<para> a new <link linkend="AsDatabase"><type>AsDatabase</type></link>. </para>
<para><emphasis role="annotation">[<acronym>transfer full</acronym>]</emphasis></para>
</refsect3></refsect2>
<refsect2 id="as-database-set-database-path" role="function">
<title>as_database_set_database_path&#160;()</title>
<indexterm zone="as-database-set-database-path"><primary>as_database_set_database_path</primary></indexterm>
<programlisting language="C"><link linkend="void"><returnvalue>void</returnvalue></link>
as_database_set_database_path (<parameter><link linkend="AsDatabase"><type>AsDatabase</type></link> *self</parameter>,
                               <parameter>const <link linkend="gchar"><type>gchar</type></link> *value</parameter>);</programlisting>
<para>
</para>
</refsect2>
<refsect2 id="as-database-open" role="function">
<title>as_database_open&#160;()</title>
<indexterm zone="as-database-open"><primary>as_database_open</primary></indexterm>
<programlisting language="C"><link linkend="gboolean"><returnvalue>gboolean</returnvalue></link>
as_database_open (<parameter><link linkend="AsDatabase"><type>AsDatabase</type></link> *self</parameter>);</programlisting>
<para>
</para>
<refsect3 role="returns">
<title>Returns</title>

<para></para>
</refsect3></refsect2>
<refsect2 id="as-database-get-database-path" role="function">
<title>as_database_get_database_path&#160;()</title>
<indexterm zone="as-database-get-database-path"><primary>as_database_get_database_path</primary></indexterm>
<programlisting language="C">const <link linkend="gchar"><returnvalue>gchar</returnvalue></link>&#160;*
as_database_get_database_path (<parameter><link linkend="AsDatabase"><type>AsDatabase</type></link> *self</parameter>);</programlisting>
<para>
</para>
<refsect3 role="returns">
<title>Returns</title>

<para></para>
</refsect3></refsect2>
<refsect2 id="as-database-db-exists" role="function">
<title>as_database_db_exists&#160;()</title>
<indexterm zone="as-database-db-exists"><primary>as_database_db_exists</primary></indexterm>
<programlisting language="C"><link linkend="gboolean"><returnvalue>gboolean</returnvalue></link>
as_database_db_exists (<parameter><link linkend="AsDatabase"><type>AsDatabase</type></link> *self</parameter>);</programlisting>
<refsect3 role="parameters">
<title>Parameters</title>
<informaltable role="parameters_table" pgwide="1" frame="none">
<tgroup cols="3">
<colspec colname="parameters_name" colwidth="150px"/>
<colspec colname="parameters_description"/>
<colspec colname="parameters_annotations" colwidth="200px"/>
<tbody>
<row><entry role="parameter_name"><para>self</para></entry>
<entry role="parameter_description"><para>a valid <link linkend="AsDatabase"><type>AsDatabase</type></link> instance</para></entry>
<entry role="parameter_annotations"></entry></row>
</tbody></tgroup></informaltable>
</refsect3><refsect3 role="returns">
<title>Returns</title>
<para> TRUE if the application database exists</para>
<para></para>
</refsect3></refsect2>
<refsect2 id="as-database-get-all-components" role="function">
<title>as_database_get_all_components&#160;()</title>
<indexterm zone="as-database-get-all-components"><primary>as_database_get_all_components</primary></indexterm>
<programlisting language="C"><link linkend="GPtrArray"><returnvalue>GPtrArray</returnvalue></link>&#160;*
as_database_get_all_components (<parameter><link linkend="AsDatabase"><type>AsDatabase</type></link> *self</parameter>);</programlisting>
<para>Dump a list of all components found in the database.</para>
<refsect3 role="parameters">
<title>Parameters</title>
<informaltable role="parameters_table" pgwide="1" frame="none">
<tgroup cols="3">
<colspec colname="parameters_name" colwidth="150px"/>
<colspec colname="parameters_description"/>
<colspec colname="parameters_annotations" colwidth="200px"/>
<tbody>
<row><entry role="parameter_name"><para>self</para></entry>
<entry role="parameter_description"><para>a valid <link linkend="AsDatabase"><type>AsDatabase</type></link> instance</para></entry>
<entry role="parameter_annotations"></entry></row>
</tbody></tgroup></informaltable>
</refsect3><refsect3 role="returns">
<title>Returns</title>
<para> an array of <link linkend="AsComponent"><type>AsComponent</type></link> objects. </para>
<para><emphasis role="annotation">[<acronym>element-type</acronym> AsComponent][<acronym>transfer full</acronym>]</emphasis></para>
</refsect3></refsect2>
<refsect2 id="as-database-find-components" role="function">
<title>as_database_find_components&#160;()</title>
<indexterm zone="as-database-find-components"><primary>as_database_find_components</primary></indexterm>
<programlisting language="C"><link linkend="GPtrArray"><returnvalue>GPtrArray</returnvalue></link>&#160;*
as_database_find_components (<parameter><link linkend="AsDatabase"><type>AsDatabase</type></link> *self</parameter>,
                             <parameter><link linkend="AsSearchQuery"><type>AsSearchQuery</type></link> *query</parameter>);</programlisting>
<para>Find components in the Appstream database.</para>
<refsect3 role="parameters">
<title>Parameters</title>
<informaltable role="parameters_table" pgwide="1" frame="none">
<tgroup cols="3">
<colspec colname="parameters_name" colwidth="150px"/>
<colspec colname="parameters_description"/>
<colspec colname="parameters_annotations" colwidth="200px"/>
<tbody>
<row><entry role="parameter_name"><para>self</para></entry>
<entry role="parameter_description"><para>a valid <link linkend="AsDatabase"><type>AsDatabase</type></link> instance</para></entry>
<entry role="parameter_annotations"></entry></row>
<row><entry role="parameter_name"><para>query</para></entry>
<entry role="parameter_description"><para>a <link linkend="AsSearchQuery"><type>AsSearchQuery</type></link></para></entry>
<entry role="parameter_annotations"></entry></row>
</tbody></tgroup></informaltable>
</refsect3><refsect3 role="returns">
<title>Returns</title>
<para> an array of <link linkend="AsComponent"><type>AsComponent</type></link> objects which have been found. </para>
<para><emphasis role="annotation">[<acronym>element-type</acronym> AsComponent][<acronym>transfer full</acronym>]</emphasis></para>
</refsect3></refsect2>
<refsect2 id="as-database-find-components-by-term" role="function">
<title>as_database_find_components_by_term&#160;()</title>
<indexterm zone="as-database-find-components-by-term"><primary>as_database_find_components_by_term</primary></indexterm>
<programlisting language="C"><link linkend="GPtrArray"><returnvalue>GPtrArray</returnvalue></link>&#160;*
as_database_find_components_by_term (<parameter><link linkend="AsDatabase"><type>AsDatabase</type></link> *self</parameter>,
                                     <parameter>const <link linkend="gchar"><type>gchar</type></link> *search_term</parameter>,
                                     <parameter>const <link linkend="gchar"><type>gchar</type></link> *categories_str</parameter>);</programlisting>
<para>Find components in the Appstream database by searching for a simple string.</para>
<refsect3 role="parameters">
<title>Parameters</title>
<informaltable role="parameters_table" pgwide="1" frame="none">
<tgroup cols="3">
<colspec colname="parameters_name" colwidth="150px"/>
<colspec colname="parameters_description"/>
<colspec colname="parameters_annotations" colwidth="200px"/>
<tbody>
<row><entry role="parameter_name"><para>self</para></entry>
<entry role="parameter_description"><para>a valid <link linkend="AsDatabase"><type>AsDatabase</type></link> instance</para></entry>
<entry role="parameter_annotations"></entry></row>
<row><entry role="parameter_name"><para>search_term</para></entry>
<entry role="parameter_description"><para>the string to search for</para></entry>
<entry role="parameter_annotations"></entry></row>
<row><entry role="parameter_name"><para>categories_str</para></entry>
<entry role="parameter_description"><para> a comma-separated list of category names, or NULL to search in all categories. </para></entry>
<entry role="parameter_annotations"><emphasis role="annotation">[<acronym>allow-none</acronym>][<acronym>default</acronym> NULL]</emphasis></entry></row>
</tbody></tgroup></informaltable>
</refsect3><refsect3 role="returns">
<title>Returns</title>
<para> an array of <link linkend="AsComponent"><type>AsComponent</type></link> objects which have been found. </para>
<para><emphasis role="annotation">[<acronym>element-type</acronym> AsComponent][<acronym>transfer full</acronym>]</emphasis></para>
</refsect3></refsect2>
<refsect2 id="as-database-get-component-by-id" role="function">
<title>as_database_get_component_by_id&#160;()</title>
<indexterm zone="as-database-get-component-by-id"><primary>as_database_get_component_by_id</primary></indexterm>
<programlisting language="C"><link linkend="AsComponent"><returnvalue>AsComponent</returnvalue></link>&#160;*
as_database_get_component_by_id (<parameter><link linkend="AsDatabase"><type>AsDatabase</type></link> *self</parameter>,
                                 <parameter>const <link linkend="gchar"><type>gchar</type></link> *idname</parameter>);</programlisting>
<para>Get a component by it's ID</para>
<refsect3 role="parameters">
<title>Parameters</title>
<informaltable role="parameters_table" pgwide="1" frame="none">
<tgroup cols="3">
<colspec colname="parameters_name" colwidth="150px"/>
<colspec colname="parameters_description"/>
<colspec colname="parameters_annotations" colwidth="200px"/>
<tbody>
<row><entry role="parameter_name"><para>self</para></entry>
<entry role="parameter_description"><para>a valid <link linkend="AsDatabase"><type>AsDatabase</type></link> instance</para></entry>
<entry role="parameter_annotations"></entry></row>
<row><entry role="parameter_name"><para>idname</para></entry>
<entry role="parameter_description"><para>the ID of the component</para></entry>
<entry role="parameter_annotations"></entry></row>
</tbody></tgroup></informaltable>
</refsect3><refsect3 role="returns">
<title>Returns</title>
<para> an <link linkend="AsComponent"><type>AsComponent</type></link> or NULL if none was found. </para>
<para><emphasis role="annotation">[<acronym>transfer full</acronym>]</emphasis></para>
</refsect3></refsect2>
<refsect2 id="as-database-get-components-by-provides" role="function">
<title>as_database_get_components_by_provides&#160;()</title>
<indexterm zone="as-database-get-components-by-provides"><primary>as_database_get_components_by_provides</primary></indexterm>
<programlisting language="C"><link linkend="GPtrArray"><returnvalue>GPtrArray</returnvalue></link>&#160;*
as_database_get_components_by_provides
                               (<parameter><link linkend="AsDatabase"><type>AsDatabase</type></link> *self</parameter>,
                                <parameter><link linkend="AsProvidesKind"><type>AsProvidesKind</type></link> kind</parameter>,
                                <parameter>const <link linkend="gchar"><type>gchar</type></link> *value</parameter>,
                                <parameter>const <link linkend="gchar"><type>gchar</type></link> *data</parameter>);</programlisting>
<para>Find components in the Appstream database.</para>
<refsect3 role="parameters">
<title>Parameters</title>
<informaltable role="parameters_table" pgwide="1" frame="none">
<tgroup cols="3">
<colspec colname="parameters_name" colwidth="150px"/>
<colspec colname="parameters_description"/>
<colspec colname="parameters_annotations" colwidth="200px"/>
<tbody>
<row><entry role="parameter_name"><para>self</para></entry>
<entry role="parameter_description"><para>a valid <link linkend="AsDatabase"><type>AsDatabase</type></link> instance</para></entry>
<entry role="parameter_annotations"></entry></row>
<row><entry role="parameter_name"><para>kind</para></entry>
<entry role="parameter_description"><para>an <link linkend="AsProvidesKind"><type>AsProvidesKind</type></link></para></entry>
<entry role="parameter_annotations"></entry></row>
<row><entry role="parameter_name"><para>value</para></entry>
<entry role="parameter_description"><para>a value of the selected provides kind</para></entry>
<entry role="parameter_annotations"></entry></row>
<row><entry role="parameter_name"><para>data</para></entry>
<entry role="parameter_description"><para> additional provides data. </para></entry>
<entry role="parameter_annotations"><emphasis role="annotation">[<acronym>allow-none</acronym>][<acronym>default</acronym> NULL]</emphasis></entry></row>
</tbody></tgroup></informaltable>
</refsect3><refsect3 role="returns">
<title>Returns</title>
<para> an array of <link linkend="AsComponent"><type>AsComponent</type></link> objects which have been found, NULL on error. </para>
<para><emphasis role="annotation">[<acronym>element-type</acronym> AsComponent][<acronym>transfer full</acronym>]</emphasis></para>
</refsect3></refsect2>
<refsect2 id="as-database-get-components-by-kind" role="function">
<title>as_database_get_components_by_kind&#160;()</title>
<indexterm zone="as-database-get-components-by-kind"><primary>as_database_get_components_by_kind</primary></indexterm>
<programlisting language="C"><link linkend="GPtrArray"><returnvalue>GPtrArray</returnvalue></link>&#160;*
as_database_get_components_by_kind (<parameter><link linkend="AsDatabase"><type>AsDatabase</type></link> *self</parameter>,
                                    <parameter><link linkend="AsComponentKind"><type>AsComponentKind</type></link> kinds</parameter>);</programlisting>
<para>Find components of a given kind.</para>
<refsect3 role="parameters">
<title>Parameters</title>
<informaltable role="parameters_table" pgwide="1" frame="none">
<tgroup cols="3">
<colspec colname="parameters_name" colwidth="150px"/>
<colspec colname="parameters_description"/>
<colspec colname="parameters_annotations" colwidth="200px"/>
<tbody>
<row><entry role="parameter_name"><para>self</para></entry>
<entry role="parameter_description"><para>a valid <link linkend="AsDatabase"><type>AsDatabase</type></link> instance</para></entry>
<entry role="parameter_annotations"></entry></row>
<row><entry role="parameter_name"><para>kinds</para></entry>
<entry role="parameter_description"><para>an <link linkend="AsComponentKind"><type>AsComponentKind</type></link> bitfield</para></entry>
<entry role="parameter_annotations"></entry></row>
</tbody></tgroup></informaltable>
</refsect3><refsect3 role="returns">
<title>Returns</title>
<para> an array of <link linkend="AsComponent"><type>AsComponent</type></link> objects which have been found, NULL on error. </para>
<para><emphasis role="annotation">[<acronym>element-type</acronym> AsComponent][<acronym>transfer full</acronym>]</emphasis></para>
</refsect3></refsect2>

</refsect1>
<refsect1 id="AsDatabase.other_details" role="details">
<title role="details.title">Types and Values</title>

</refsect1>
<refsect1 id="AsDatabase.property-details" role="property_details">
<title role="property_details.title">Property Details</title>
<refsect2 id="AsDatabase--database-path" role="property"><title>The <literal>“database-path”</literal> property</title>
<indexterm zone="AsDatabase--database-path"><primary>AsDatabase:database-path</primary></indexterm>
<programlisting>  “database-path”            <link linkend="gchar"><type>gchar</type></link>&#160;*</programlisting>
<para>database-path.</para><para>Flags: Read / Write</para>
<para>Default value: NULL</para>
</refsect2>

</refsect1>

</refentry>
