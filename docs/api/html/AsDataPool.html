<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>AsDataPool: AppStream Library Reference Manual</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="index.html" title="AppStream Library Reference Manual">
<link rel="up" href="ch01.html" title="AppStream API Reference">
<link rel="prev" href="AsMetadata.html" title="AsMetadata">
<link rel="next" href="AsDistroDetails.html" title="AsDistroDetails">
<meta name="generator" content="GTK-Doc V1.24 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
<td width="100%" align="left" class="shortcuts">
<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
                  <a href="#AsDataPool.description" class="shortcut">Description</a></span><span id="nav_hierarchy">  <span class="dim">|</span> 
                  <a href="#AsDataPool.object-hierarchy" class="shortcut">Object Hierarchy</a></span>
</td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
<td><a accesskey="u" href="ch01.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
<td><a accesskey="p" href="AsMetadata.html"><img src="left.png" width="16" height="16" border="0" alt="Prev"></a></td>
<td><a accesskey="n" href="AsDistroDetails.html"><img src="right.png" width="16" height="16" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry">
<a name="AsDataPool"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="AsDataPool.top_of_page"></a>AsDataPool</span></h2>
<p>AsDataPool — Collect and temporarily store metadata from different sources</p>
</td>
<td class="gallery_image" valign="top" align="right"></td>
</tr></table></div>
<div class="refsect1">
<a name="AsDataPool.functions"></a><h2>Functions</h2>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="functions_return">
<col class="functions_name">
</colgroup>
<tbody>
<tr>
<td class="function_type">
<a class="link" href="AsDataPool.html" title="AsDataPool"><span class="returnvalue">AsDataPool</span></a> *
</td>
<td class="function_name">
<a class="link" href="AsDataPool.html#as-data-pool-new" title="as_data_pool_new ()">as_data_pool_new</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gchar</span> **
</td>
<td class="function_name">
<a class="link" href="AsDataPool.html#as-data-pool-get-watched-locations" title="as_data_pool_get_watched_locations ()">as_data_pool_get_watched_locations</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gboolean</span>
</td>
<td class="function_name">
<a class="link" href="AsDataPool.html#as-data-pool-update" title="as_data_pool_update ()">as_data_pool_update</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">GList</span> *
</td>
<td class="function_name">
<a class="link" href="AsDataPool.html#as-data-pool-get-components" title="as_data_pool_get_components ()">as_data_pool_get_components</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">const <span class="returnvalue">gchar</span> *
</td>
<td class="function_name">
<a class="link" href="AsDataPool.html#as-data-pool-get-locale" title="as_data_pool_get_locale ()">as_data_pool_get_locale</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="AsDataPool.html#as-data-pool-set-locale" title="as_data_pool_set_locale ()">as_data_pool_set_locale</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="AsDataPool.html#as-data-pool-set-data-source-directories" title="as_data_pool_set_data_source_directories ()">as_data_pool_set_data_source_directories</a> <span class="c_punctuation">()</span>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="AsDataPool.object-hierarchy"></a><h2>Object Hierarchy</h2>
<pre class="screen">    GObject
    <span class="lineart">╰──</span> AsDataPool
</pre>
</div>
<div class="refsect1">
<a name="AsDataPool.description"></a><h2>Description</h2>
<p>This class contains a temporary pool of metadata which has been collected from different
sources on the system.
It can directly be used, but usually it is accessed through a <a class="link" href="AsDatabase.html" title="AsDatabase"><span class="type">AsDatabase</span></a> instance.
This class is used by internally by the cache builder, but might be useful for others.</p>
<p>See also: <a class="link" href="AsDatabase.html" title="AsDatabase"><span class="type">AsDatabase</span></a></p>
</div>
<div class="refsect1">
<a name="AsDataPool.functions_details"></a><h2>Functions</h2>
<div class="refsect2">
<a name="as-data-pool-new"></a><h3>as_data_pool_new ()</h3>
<pre class="programlisting"><a class="link" href="AsDataPool.html" title="AsDataPool"><span class="returnvalue">AsDataPool</span></a> *
as_data_pool_new (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<p>Creates a new <a class="link" href="AsDataPool.html" title="AsDataPool"><span class="type">AsDataPool</span></a>.</p>
<div class="refsect3">
<a name="id-1.2.9.6.2.5"></a><h4>Returns</h4>
<p> a <a class="link" href="AsDataPool.html" title="AsDataPool"><span class="type">AsDataPool</span></a>. </p>
<p><span class="annotation">[<acronym title="Free data after the code is done."><span class="acronym">transfer full</span></acronym>]</span></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="as-data-pool-get-watched-locations"></a><h3>as_data_pool_get_watched_locations ()</h3>
<pre class="programlisting"><span class="returnvalue">gchar</span> **
as_data_pool_get_watched_locations (<em class="parameter"><code><a class="link" href="AsDataPool.html" title="AsDataPool"><span class="type">AsDataPool</span></a> *dpool</code></em>);</pre>
<p>Return a list of all locations which are searched for metadata.</p>
<div class="refsect3">
<a name="id-1.2.9.6.3.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>dpool</p></td>
<td class="parameter_description"><p>a valid <a class="link" href="AsDataPool.html" title="AsDataPool"><span class="type">AsDataPool</span></a> instance</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.2.9.6.3.6"></a><h4>Returns</h4>
<p> A string-list of watched (absolute) filepaths. </p>
<p><span class="annotation">[<acronym title="Free data after the code is done."><span class="acronym">transfer full</span></acronym>]</span></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="as-data-pool-update"></a><h3>as_data_pool_update ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
as_data_pool_update (<em class="parameter"><code><a class="link" href="AsDataPool.html" title="AsDataPool"><span class="type">AsDataPool</span></a> *dpool</code></em>);</pre>
<p>Builds an index of all found components in the watched locations.
The function will try to get as much data into the pool as possible, so even if
the updates completes with <code class="literal">FALSE</code>, it might still add components to the pool.</p>
<div class="refsect3">
<a name="id-1.2.9.6.4.5"></a><h4>Returns</h4>
<p> <code class="literal">TRUE</code> if update completed without error.</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="as-data-pool-get-components"></a><h3>as_data_pool_get_components ()</h3>
<pre class="programlisting"><span class="returnvalue">GList</span> *
as_data_pool_get_components (<em class="parameter"><code><a class="link" href="AsDataPool.html" title="AsDataPool"><span class="type">AsDataPool</span></a> *dpool</code></em>);</pre>
<p>Get a list of found components.</p>
<div class="refsect3">
<a name="id-1.2.9.6.5.5"></a><h4>Returns</h4>
<p> a list of <a class="link" href="AsComponent.html" title="AsComponent"><span class="type">AsComponent</span></a> instances, free with <code class="function">g_list_free()</code>. </p>
<p><span class="annotation">[<acronym title="Generics and defining elements of containers and arrays."><span class="acronym">element-type</span></acronym> AsComponent][<acronym title="Free data container after the code is done."><span class="acronym">transfer container</span></acronym>]</span></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="as-data-pool-get-locale"></a><h3>as_data_pool_get_locale ()</h3>
<pre class="programlisting">const <span class="returnvalue">gchar</span> *
as_data_pool_get_locale (<em class="parameter"><code><a class="link" href="AsDataPool.html" title="AsDataPool"><span class="type">AsDataPool</span></a> *dpool</code></em>);</pre>
<p>Gets the currently used locale.</p>
<div class="refsect3">
<a name="id-1.2.9.6.6.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>dpool</p></td>
<td class="parameter_description"><p>a <a class="link" href="AsDataPool.html" title="AsDataPool"><span class="type">AsDataPool</span></a> instance.</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.2.9.6.6.6"></a><h4>Returns</h4>
<p> Locale used for metadata parsing.</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="as-data-pool-set-locale"></a><h3>as_data_pool_set_locale ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
as_data_pool_set_locale (<em class="parameter"><code><a class="link" href="AsDataPool.html" title="AsDataPool"><span class="type">AsDataPool</span></a> *dpool</code></em>,
                         <em class="parameter"><code>const <span class="type">gchar</span> *locale</code></em>);</pre>
<p>Sets the current locale which should be used when parsing metadata.</p>
<div class="refsect3">
<a name="id-1.2.9.6.7.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>dpool</p></td>
<td class="parameter_description"><p>a <a class="link" href="AsDataPool.html" title="AsDataPool"><span class="type">AsDataPool</span></a> instance.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>locale</p></td>
<td class="parameter_description"><p>the locale.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="as-data-pool-set-data-source-directories"></a><h3>as_data_pool_set_data_source_directories ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
as_data_pool_set_data_source_directories
                               (<em class="parameter"><code><a class="link" href="AsDataPool.html" title="AsDataPool"><span class="type">AsDataPool</span></a> *dpool</code></em>,
                                <em class="parameter"><code><span class="type">gchar</span> **dirs</code></em>);</pre>
<p>Set locations for the data pool to read it's data from.
This is mainly used for testing purposes. Each location should have an
"xmls" and/or "yaml" subdirectory with the actual data as (compressed)
AppStream XML or DEP-11 YAML in it.</p>
<div class="refsect3">
<a name="id-1.2.9.6.8.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>dirs</p></td>
<td class="parameter_description"><p> a zero-terminated array of data input directories. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter points to an array of items."><span class="acronym">array</span></acronym> zero-terminated=1]</span></td>
</tr></tbody>
</table></div>
</div>
</div>
</div>
<div class="refsect1">
<a name="AsDataPool.other_details"></a><h2>Types and Values</h2>
</div>
</div>
<div class="footer">
<hr>Generated by GTK-Doc V1.24</div>
</body>
</html>