<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Chapter 2. Upstream Metadata</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta name="generator" content="publican 3.2.1" /><meta name="package" content="AppStream-AppStream-0.6-en-US-0.0-0" /><link rel="home" href="index.html" title="AppStream" /><link rel="up" href="index.html" title="AppStream" /><link rel="prev" href="chap-AppStream-About.html" title="Chapter 1. About AppStream" /><link rel="next" href="sect-Metadata-Application.html" title="2.2. Desktop Applications (AppData)" /></head><body><p id="title"><a class="left" href="http://www.freedesktop.org/wiki/Distributions/AppStream/"><img alt="Product Site" src="Common_Content/images//image_left.png" /></a><a class="right" href="http://www.freedesktop.org/software/appstream/docs/"><img alt="Documentation Site" src="Common_Content/images//image_right.png" /></a></p><ul class="docnav top"><li class="previous"><a accesskey="p" href="chap-AppStream-About.html"><strong>Prev</strong></a></li><li class="home">AppStream</li><li class="next"><a accesskey="n" href="sect-Metadata-Application.html"><strong>Next</strong></a></li></ul><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Metadata"></a>Chapter 2. Upstream Metadata</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="chap-Metadata.html#sect-Metadata-GenericComponent">2.1. Generic Component</a></span></dt><dt><span class="section"><a href="sect-Metadata-Application.html">2.2. Desktop Applications (AppData)</a></span></dt><dt><span class="section"><a href="sect-Metadata-Codec.html">2.3. Codecs</a></span></dt><dt><span class="section"><a href="sect-Metadata-InputMethod.html">2.4. Input Methods</a></span></dt></dl></div><div class="para">
		AppStream allows upstream projects to define metadata about the components they provide using small XML files, metainfo files, which get installed into locations on the client system and are used by distribuors to enhance their metadata.
	</div><div class="para">
		A "component" is a piece of software, like an application, a library, a font or a codec. For several components, especially those which are shown in software-centers, we provide specialized metainfo files to define specific properties and data of these components. For example, applications and fonts support screenshots, while codecs don't.
	</div><div class="para">
		All metainfo files need to contain a minimal amount of information, defined in the "Generic Component" section, which also describes some optional elements which can be used. Specialized components might require more information to be complete and valid.
	</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Metadata-GenericComponent"></a>2.1. Generic Component</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="spec-component-introduction"></a>2.1.1. Introduction</h3></div></div></div><div class="para">
			For a distribution, it is good to know more about the content of a package. Which public interfaces (libraries? Python modules?) does it provide? Does it contain codecs? Does it contain firmware? Fonts? An application? All of this information can be used to automatically install missing software or to offer users a choice on what they want to install from a software center.
		</div><div class="para">
			To provide this information, we created the <span class="italic italic">metainfo</span> files, which allow <span class="bold bold"><strong>upstream projects</strong></span> to describe the content of their software package. If a metainfo file provides a <code class="literal">&lt;provides/&gt;</code> tag, distributors must also ensure that the package providing the file contain all items referenced by that statement, or is installed by a metapackage depending on packages which provide these items. This gives upstream projects a (very light) way to influence distributor packaging. More information about that can be found below.
		</div><div class="para">
			Several specialized component-metainfo files exist, for example for applications or fonts. These are all based on this generic component XML specification, and are described in the following chapters.
		</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="spec-component-location"></a>2.1.2. Filesystem locations</h3></div></div></div><div class="para">
			Upstream projects can ship one or more metainfo files in <code class="filename">/usr/share/appdata/%{id}.metainfo.xml</code>, where <code class="literal">id</code> is a unique identifier of this specific component.
		</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
				Applications are a special case here, because they are special in some ways (and also for historical reasons). If your metainfo file covers only an application, as described in the AppData section, install it as <code class="filename">/usr/share/appdata/%{id}.appdata.xml</code>.
			</div></div></div><div class="para">
			Please note that the <code class="filename">/usr/share/appdata/symbols</code> directory is reserved for a possible future use for storing upstream-generated symbols files for libraries.
		</div><div class="important"><div class="admonition_header"><p><strong>Multiarch Support</strong></p></div><div class="admonition"><div class="para">
				On multiarch-aware systems such as Debian: If a component ships a library, the meta-info file should be in the same package as the library itself, or in a package depending on that library. To make the library packages co-installable, the metadata can be installed into <code class="filename">/usr/share/appdata/&lt;triplet&gt;</code>, for example <code class="filename">/usr/share/appdata/x86_64-linux-gnu/foobar.metainfo.xml</code>. Upstream projects which ship components with libraries should adjust their buildsystem to install a multi-arch compatible metainfo file by default. Make use of the <code class="literal">&lt;architectures/&gt;</code> tag to indicate that the meta-info file is arch specific.
			</div></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="spec-component-filespec"></a>2.1.3. XML Specification</h3></div></div></div><div class="para">
			The XML for a generic component definition starts with an <code class="code">&lt;component&gt;
</code> tag as root element. The <code class="code">&lt;component&gt;
</code> element must at least have an <code class="literal">id</code>, <code class="literal">name</code> and <code class="literal">releases</code> tag, a <code class="literal">provides</code> tag with appropriate children is highly recommended. All possible tags in the generic set are:
		</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">&lt;id/&gt;</span></dt><dd><div class="para">
						The <code class="code">&lt;id&gt;
</code> tag is a short and unique identifier for this component. It must contain only ASCII caracters, dots, hyphens and numbers, spaces are not allowed. Specialized metainfo types, such as application or fonts, may apply additional restrictions on the <code class="literal">id</code> tag value.
					</div><div class="para">
						Note that the value of this tag must be <span class="emphasis"><em>unique</em></span> across all distributions. In case it is not, distributors are expected to reject the conflicting components from inclusion into their metadata.
					</div></dd><dt><span class="term">&lt;name/&gt;</span></dt><dd><div class="para">
						A human-readable name for this software component. For example, if the component id was "libc", it's name might be "GNU Standard C Library".
					</div></dd><dt><span class="term">&lt;summary/&gt;</span></dt><dd><div class="para">
						A short summary of what this component does. If the component is "PackageKit", the summary could be "Provides a package-management abstraction layer".
					</div></dd><dt><a id="spec-component-filespec-url"></a><span class="term">&lt;url/&gt;</span></dt><dd><div class="para">
						Defines URLs for this component.There are several different URL types allowed:
					</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">homepage</span></dt><dd><div class="para">
									Should be a link to the upstream homepage for the component.
								</div></dd><dt><span class="term">bugtracker</span></dt><dd><div class="para">
									Should point to the software's bug tracking system, for users to report new bugs.
								</div></dd><dt><span class="term">faq</span></dt><dd><div class="para">
									Should link a FAQ page for this software, to answer some of the most-asked questions in detail, something which you can not do in the component's description.
								</div></dd><dt><span class="term">help</span></dt><dd><div class="para">
									Should provide a link to an online user's reference, a software manual or help page.
								</div></dd><dt><span class="term">donation</span></dt><dd><div class="para">
									Links of this type should point to a webpage showing information on how to donate to the described software project.
								</div></dd></dl></div></dd><dt><a id="spec-component-filespec-releases"></a><span class="term">&lt;releases/&gt;</span></dt><dd><div class="para">
						The <code class="code">&lt;releases&gt;
</code> tag contains <code class="code">&lt;release/&gt;</code> child tags which describe some metainformation about the current release of the described software. The <code class="code">&lt;release/&gt;</code> tag may be present multiple times (for older releases), but a tag for the current version must always be present. A <code class="literal">release</code> tag can have the properties <code class="literal">version</code> and <code class="literal">timestamp</code> which contain the version number and a release timestamp in form of YYYYMMDD.
					</div><div class="para">
						Examples for a valid releases tag:
					</div><pre class="programlisting">
<span class="perl_Keyword">&lt;releases&gt;</span>
  <span class="perl_Keyword">&lt;release</span><span class="perl_Others"> version=</span><span class="perl_String">"1.2"</span><span class="perl_Others"> timestamp=</span><span class="perl_String">"20140412"</span> <span class="perl_Keyword">/&gt;</span>
  <span class="perl_Keyword">&lt;release</span><span class="perl_Others"> version=</span><span class="perl_String">"1.0"</span><span class="perl_Others"> timestamp=</span><span class="perl_String">"20120826"</span> <span class="perl_Keyword">/&gt;</span>
<span class="perl_Keyword">&lt;/releases&gt;</span>
</pre></dd><dt><a id="spec-component-filespec-provides"></a><span class="term">&lt;provides/&gt;</span></dt><dd><div class="para">
						The <code class="literal">provides</code> tag and it's children describe the public interfaces this application provides. A public interface can be anything which other applications, which are not part of the upstream project, can access or reference. This includes binaries and libraries. Private interfaces should never be added to a <code class="literal">provides</code> tag.
					</div><div class="para">
						A <code class="literal">provides</code> tag contain a number of childrens describing the type and name of the provided public interface items. It is suggested that the build-system auto-generates this tag and it's children. Currently allowed item types are listed below. If you miss something, file a bug against AppStream so we can add the new type.
					</div><div class="variablelist"><dl class="variablelist"><dt><span class="term">&lt;library/&gt;</span></dt><dd><div class="para">
									Contains the name of a shared library placed in a publicly accessible library path, such as <code class="filename">/usr/lib</code>, <code class="filename">/usr/lib/&lt;triplet&gt;</code> or <code class="filename">/lib</code>. For example, for the libappstream library, the value for <code class="literal">library</code> would be <strong class="userinput"><code>libappstream.so.1</code></strong>.
								</div></dd><dt><span class="term">&lt;binary/&gt;</span></dt><dd><div class="para">
									Name of a binary installed into a location in <code class="envar">PATH</code>.
								</div></dd><dt><span class="term">&lt;font/&gt;</span></dt><dd><div class="para">
									Name of a font provided by this component. For example <strong class="userinput"><code>Linux Libertine O</code></strong>. The tag must have a <code class="literal">file</code> property stating the filename of the referenced font.
								</div><div class="para">
									Example:
								</div><pre class="programlisting"><span class="perl_Keyword">&lt;provides&gt;</span>
  <span class="perl_Keyword">&lt;font</span><span class="perl_Others"> file=</span><span class="perl_String">"LinLibertine_R.otf"</span><span class="perl_Keyword">&gt;</span>Linux Libertine O<span class="perl_Keyword">&lt;/font&gt;</span>
<span class="perl_Keyword">&lt;/provides&gt;</span>
</pre></dd><dt><span class="term">&lt;modalias/&gt;</span></dt><dd><div class="para">
									A modalias glob representing the hardware types (for example USB, PCI, ACPI, DMI) this component handles. Useful for installing printer drivers or other USB protocol drivers for smartphones, firmware, kernel drivers which are not merged upstream yet or whatever else.
								</div></dd><dt><span class="term">&lt;firmware/&gt;</span></dt><dd><div class="para">
									Name of the firmware this component provides, to make it possible to find the right firmware package to install for a given kernel driver. The value is the path below /lib/firmware to the firmware file in question, like the firmware value exported from Linux kernel modules.
								</div><div class="para">
									Example:
								</div><pre class="programlisting"><span class="perl_Keyword">&lt;provides&gt;</span>
  <span class="perl_Keyword">&lt;firmware&gt;</span>ipw2200-bss.fw<span class="perl_Keyword">&lt;/firmware&gt;</span>
<span class="perl_Keyword">&lt;/provides&gt;</span>
</pre></dd><dt><span class="term">&lt;python2/&gt;</span></dt><dd><div class="para">
									Name of a Python2 module this component provides.
								</div></dd><dt><span class="term">&lt;python3/&gt;</span></dt><dd><div class="para">
									Name of a Python3 module this component provides.
								</div></dd></dl></div></dd><dt><a id="spec-component-filespec-project_group"></a><span class="term">&lt;project_group/&gt;</span></dt><dd><div class="para">
						If you include the <code class="code">&lt;project_group/&gt;</code> tag then this identifies your project with a specific upstream umbrella project. Known values include GNOME, KDE, XFCE, MATE and LXDE, although other umbrella projects like Yorba or Mozilla make sense too.
					</div><div class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
							You should only identify with an umbrella project if you use all their infrastructure and policies, for instance string freezes dates, bugtracker and source control instance.
						</div></div></div></dd><dt><a id="spec-component-filespec-metadata_license"></a><span class="term">&lt;metadata_license/&gt;</span></dt><dd><div class="para">
						The <code class="code">&lt;metadata_license/&gt;</code> tag is indicating the content licence that you are releasing the one Metainfo XML file as. This is not typically the same as the project licence. By ommitting the licence value would probably mean your data would not be incorporated into the distribution metadata (so this is a required tag). Permissible licence codes include:
					</div><div class="itemizedlist"><ul><li class="listitem"><div class="para">
								CC0-1.0
							</div></li><li class="listitem"><div class="para">
								CC-BY-3.0
							</div></li><li class="listitem"><div class="para">
								CC-BY-SA-3.0
							</div></li><li class="listitem"><div class="para">
								GFDL-1.3
							</div></li><li class="listitem"><div class="para">
								MIT
							</div></li></ul></div><div class="para">
						The licence codes correspond to the identifiers found at the <a href="http://spdx.org/licenses/">SPDX OpenSource License Registry</a>. For instance, CC-BY-SA-3.0 corresponds to http://creativecommons.org/licenses/by-sa/3.0/
					</div></dd></dl></div><div class="para">
			An example for a very basic component file could look like this:
		</div><pre class="programlisting">
<span class="perl_Keyword">&lt;?xml</span> version="1.0" encoding="UTF-8"<span class="perl_Keyword">?&gt;</span>
<span class="perl_Keyword">&lt;component&gt;</span>
  <span class="perl_Keyword">&lt;id&gt;</span>foobar<span class="perl_Keyword">&lt;/id&gt;</span>
  <span class="perl_Keyword">&lt;name&gt;</span>Foo Bar<span class="perl_Keyword">&lt;/name&gt;</span>
  <span class="perl_Keyword">&lt;summary&gt;</span>A foo-ish bar<span class="perl_Keyword">&lt;/summary&gt;</span>
  <span class="perl_Keyword">&lt;url</span><span class="perl_Others"> type=</span><span class="perl_String">"homepage"</span><span class="perl_Keyword">&gt;</span>http://www.example.org<span class="perl_Keyword">&lt;/url&gt;</span>
  <span class="perl_Keyword">&lt;metadata_license&gt;</span>CC0<span class="perl_Keyword">&lt;/metadata_license&gt;</span>

  <span class="perl_Keyword">&lt;provides&gt;</span>
    <span class="perl_Keyword">&lt;library&gt;</span>libfoobar.so.2<span class="perl_Keyword">&lt;/library&gt;</span>
    <span class="perl_Keyword">&lt;font&gt;</span>foo.ttf<span class="perl_Keyword">&lt;/font&gt;</span>
    <span class="perl_Keyword">&lt;binary&gt;</span>foobar<span class="perl_Keyword">&lt;/binary&gt;</span>
  <span class="perl_Keyword">&lt;/provides&gt;</span>
  <span class="perl_Keyword">&lt;releases&gt;</span>
    <span class="perl_Keyword">&lt;release</span><span class="perl_Others"> version=</span><span class="perl_String">"1.2"</span><span class="perl_Others"> timestamp=</span><span class="perl_String">"1365768000"</span> <span class="perl_Keyword">/&gt;</span>
  <span class="perl_Keyword">&lt;/releases&gt;</span>
<span class="perl_Keyword">&lt;/component&gt;</span>

</pre></div></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="chap-AppStream-About.html"><strong>Prev</strong>Chapter 1. About AppStream</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="sect-Metadata-Application.html"><strong>Next</strong>2.2. Desktop Applications (AppData)</a></li></ul></body></html>