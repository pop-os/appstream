<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Miscellaneous | AppStream | AppStream 0.15</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 3.0.0" /><meta name="product-name" content="AppStream" /><meta name="product-number" content="0.15" /><meta name="book-title" content="AppStream" /><meta name="chapter-title" content="Chapter 4. Miscellaneous" /><meta name="description" content="This chapter describes additional features AppStream provides that are related to the metadata specification. 4.1 Version Comparison Algorithm #4.1.1 Introduction # The AppStream specification requires the presence of version numbers in various locations, and AppStream-using clients will occasionall…" /><link rel="home" href="index.html" title="AppStream" /><link rel="up" href="index.html" title="AppStream" /><link rel="prev" href="sect-AppStream-IconCache.html" title="3.3. Icon Cache" /><link rel="next" href="sect-AppStream-Misc-URIHandler.html" title="4.2. URI Handler" />
<script src="static/js/highlight.min.js" type="text/javascript"></script><script>

document.addEventListener('DOMContentLoaded', (event) => {
  document.querySelectorAll('.verbatim-wrap.highlight').forEach((block) => {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="offline js-off"><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-navigation">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><a href="https://www.freedesktop.org/software/appstream/docs/"><img src="static/images/logo.png" alt="Logo" /><span>AppStream</span></a></div><div class="crumbs"><a class="book-link" href="index.html" title="AppStream"><span class="book-icon">AppStream</span></a><span> › </span><a class="crumb" href="chap-AppStream-Misc.html">Miscellaneous</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>AppStream</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="chap-AppStream-About.html"><span class="number">1 </span><span class="name">About AppStream</span></a></li><li class="inactive"><a href="chap-Metadata.html"><span class="number">2 </span><span class="name">Upstream Metadata</span></a></li><li class="inactive"><a href="chap-CollectionData.html"><span class="number">3 </span><span class="name">Collection Metadata</span></a></li><li class="inactive"><a href="chap-AppStream-Misc.html"><span class="number">4 </span><span class="name">Miscellaneous</span></a></li><li class="inactive"><a href="chap-Quickstart.html"><span class="number">5 </span><span class="name">Metadata Quickstart</span></a></li><li class="inactive"><a href="chap-AppStream-ManualPages.html"><span class="number">6 </span><span class="name">Manual pages</span></a></li><li class="inactive"><a href="chap-AppStream-API.html"><span class="number">7 </span><span class="name">AppStream API Reference</span></a></li><li class="inactive"><a href="ix01.html"><span class="number"> </span><span class="name">Index</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="3.3. Icon Cache" href="sect-AppStream-IconCache.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="4.2. URI Handler" href="sect-AppStream-Misc-URIHandler.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="AppStream"><span class="book-icon">AppStream</span></a><span> › </span><a class="crumb" href="chap-AppStream-Misc.html">Miscellaneous</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="3.3. Icon Cache" href="sect-AppStream-IconCache.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="4.2. URI Handler" href="sect-AppStream-Misc-URIHandler.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class=""><div class="documentation"><div class="chapter" id="chap-AppStream-Misc"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname">AppStream</span> <span class="productnumber">0.15</span></div><div><h1 class="title"><span class="number">4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Miscellaneous</span> <a title="Permalink" class="permalink" href="chap-AppStream-Misc.html">#</a></h1></div></div></div><div class="line"><div class="toc"><dl><dt><span class="section"><a href="chap-AppStream-Misc.html#sect-AppStream-Misc-VerCmp"><span class="number">4.1 </span><span class="name">Version Comparison Algorithm</span></a></span></dt><dt><span class="section"><a href="sect-AppStream-Misc-URIHandler.html"><span class="number">4.2 </span><span class="name">URI Handler</span></a></span></dt></dl></div></div><p>
		This chapter describes additional features AppStream provides that are related to the
		metadata specification.
	</p><div class="sect1" id="sect-AppStream-Misc-VerCmp"><div class="titlepage"><div><div><h2 class="title" id="sect-AppStream-Misc-VerCmp"><span class="number">4.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Version Comparison Algorithm</span> <a title="Permalink" class="permalink" href="chap-AppStream-Misc.html#sect-AppStream-Misc-VerCmp">#</a></h2></div></div></div><div class="sect2" id="spec-vercmp-introduction"><div class="titlepage"><div><div><h3 class="title" id="spec-vercmp-introduction"><span class="number">4.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Introduction</span> <a title="Permalink" class="permalink" href="chap-AppStream-Misc.html#spec-vercmp-introduction">#</a></h3></div></div></div><p>
			The AppStream specification requires the presence of version numbers in various locations, and AppStream-using
			clients will occasionally need to compare version numbers in order to determine the latest version.
			This document describes how version comparisons should be performed.
		</p></div><div class="sect2" id="spec-vercmp-algorithm"><div class="titlepage"><div><div><h3 class="title" id="spec-vercmp-algorithm"><span class="number">4.1.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Algorithm</span> <a title="Permalink" class="permalink" href="chap-AppStream-Misc.html#spec-vercmp-algorithm">#</a></h3></div></div></div><p>
			AppStream's version comparison algorithm is identical to the one used by the Fedora and Debian Linux distributions
			(after RPM's algorithm was extended to handle the tilde character like Debian).
			The algorithm is described for Debian <a class="ulink" href="https://manpages.debian.org/unstable/dpkg-dev/deb-version.5.en.html#Sorting_algorithm" target="_blank">here<span class="ulink-url"> (https://manpages.debian.org/unstable/dpkg-dev/deb-version.5.en.html#Sorting_algorithm)</span></a>,
			the description is also reproduced below:
		</p><p>
			The version strings are compared from left to right.
		</p><p>
			First the initial part of each string consisting entirely of non-digit characters is determined.
			These two parts (one of which may be empty) are compared lexically. If a difference is found it is returned. The lexical comparison is a comparison
			of ASCII values modified so that all the letters sort earlier than all the non-letters and so that a tilde sorts before anything, even the end of a part.
			For example, the following parts are in sorted order: <code class="code">~~</code>, <code class="code">~~a</code>, <code class="code">~</code>, the empty part, <code class="code">a</code>.
		</p><p>
			Then the initial part of the remainder of each string which consists entirely of digit characters is determined. The numerical values of these two parts
			are compared, and any difference found is returned as the result of the comparison. For these purposes an empty string (which can only occur at the end
			of one or both version strings being compared) counts as zero.
		</p><p>
			These two steps (comparing and removing initial non-digit strings and initial digit strings) are repeated until a difference is found or both strings are exhausted.
		</p></div><div class="sect2" id="spec-vercmp-recommendations"><div class="titlepage"><div><div><h3 class="title" id="spec-vercmp-recommendations"><span class="number">4.1.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Recommendations</span> <a title="Permalink" class="permalink" href="chap-AppStream-Misc.html#spec-vercmp-recommendations">#</a></h3></div></div></div><p>
			For meaningful version numbers, consider following <a class="ulink" href="https://semver.org/" target="_blank">semantic versioning<span class="ulink-url"> (https://semver.org/)</span></a>.
		</p><p>
			A version number should always start with a number. Do not start version numbers with a letter or make them
			consist entirely of letters, e.g. <code class="code">BETA</code> is not a version number.
		</p><p>
			If you want to denote a prerelease, consider appending the prerelease identifier string after a tidle. For example
			use <code class="code">1.0~alpha1</code> for an alpha release of the upcoming <code class="code">1.0</code> release. The alpha release
			will then considered lower than the final release.
		</p><p>
			Avoid using any epochs (colons) in your upstream version numbers. Versions like <code class="code">1:2.4</code> will cause
			problems with downstreams.
		</p></div><div class="sect2" id="spec-vercmp-implementation"><div class="titlepage"><div><div><h3 class="title" id="spec-vercmp-implementation"><span class="number">4.1.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Implementation</span> <a title="Permalink" class="permalink" href="chap-AppStream-Misc.html#spec-vercmp-implementation">#</a></h3></div></div></div><p>
			You can read AppStream's code for version comparisons <a class="ulink" href="https://github.com/ximion/appstream/blob/master/src/as-vercmp.c" target="_blank">here<span class="ulink-url"> (https://github.com/ximion/appstream/blob/master/src/as-vercmp.c)</span></a>.
		</p><p>
			If you want to quickly test version comparisons for your software and arbitrary versions, consider using the <code class="literal">vercmp</code>
			subcommand of the <code class="command">appstreamcli</code> utility.
		</p><p>
			Examples:
		</p><div class="verbatim-wrap"><pre class="screen">$ <code class="command">appstreamcli</code> vercmp 1.0 2.0
1.0 &lt;&lt; 2.0
$ <code class="command">appstreamcli</code> vercmp 2.0 2.0~a1
2.0 &gt;&gt; 2.0~a1
$ <code class="command">appstreamcli</code> vercmp 2.4 lt 2.1
false: 2.4 &gt;&gt; 2.1
$ <code class="command">appstreamcli</code> vercmp 1.2.4 gt 1.2.3
true: 1.2.4 &gt;&gt; 1.2.3</pre></div></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="sect-AppStream-Misc-URIHandler.html"><span class="next-icon">→</span><span class="nav-label">URI Handler</span></a><a class="nav-link" href="sect-AppStream-IconCache.html"><span class="prev-icon">←</span><span class="nav-label">Icon Cache</span></a></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2021 
        Freedesktop.org, the AppStream Project</p></div></div></body></html>