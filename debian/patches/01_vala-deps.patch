From 903b8c788c49360c798208e465482e0d8e9e682e Mon Sep 17 00:00:00 2001
From: Rico Tzschichholz <ricotz@ubuntu.com>
Date: Wed, 8 Feb 2017 14:20:32 +0100
Subject: [PATCH] vapi: Add appstream.deps file (#104)

---
 contrib/vapi/CMakeLists.txt | 2 ++
 contrib/vapi/appstream.deps | 1 +
 2 files changed, 3 insertions(+)
 create mode 100644 contrib/vapi/appstream.deps

--- a/contrib/vapi/CMakeLists.txt
+++ b/contrib/vapi/CMakeLists.txt
@@ -4,6 +4,7 @@
 # compiling GIR doesn't work well with asan, needs to be investigated.
 
 set(APPSTREAM_VAPI_FILE "${CMAKE_CURRENT_BINARY_DIR}/appstream.vapi")
+set(APPSTREAM_DEPS_FILE "${CMAKE_CURRENT_SOURCE_DIR}/appstream.deps")
 
 find_program (VAPIGEN vapigen)
 mark_as_advanced (VAPIGEN)
@@ -23,5 +24,6 @@
 add_custom_target(vapi ALL DEPENDS ${APPSTREAM_VAPI_FILE})
 
 install(FILES ${APPSTREAM_VAPI_FILE} DESTINATION ${CMAKE_INSTALL_DATAROOTDIR}/vala/vapi)
+install(FILES ${APPSTREAM_DEPS_FILE} DESTINATION ${CMAKE_INSTALL_DATAROOTDIR}/vala/vapi)
 
 endif()
--- /dev/null
+++ b/contrib/vapi/appstream.deps
@@ -0,0 +1 @@
+gio-2.0
