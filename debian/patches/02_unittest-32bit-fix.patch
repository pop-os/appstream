From b54e9a0845b3db186a01a9227b89ee793fd1eab2 Mon Sep 17 00:00:00 2001
From: Matthias Klumpp <matthias@tenstral.net>
Date: Tue, 16 Aug 2016 19:11:26 +0200
Subject: [PATCH] Fix test failures on 32bit architectures

---
 src/as-xmldata.c     | 2 +-
 tests/test-xmldata.c | 6 +++---
 2 files changed, 4 insertions(+), 4 deletions(-)

--- a/src/as-xmldata.c
+++ b/src/as-xmldata.c
@@ -1380,7 +1380,7 @@
 	releases = as_component_get_releases (cpt);
 	for (i = 0; i < releases->len; i++) {
 		xmlNode *subnode;
-		glong unixtime;
+		guint64 unixtime;
 		GPtrArray *locations;
 		guint j;
 		release = (AsRelease*) g_ptr_array_index (releases, i);
--- a/tests/test-xmldata.c
+++ b/tests/test-xmldata.c
@@ -380,11 +380,11 @@
 				"de");
 
 	tmp = as_metadata_component_to_upstream_xml (metad);
-	g_assert_cmpstr (tmp, ==, EXPECTED_XML_LOCALIZED);
+	g_assert (as_test_compare_lines (tmp, EXPECTED_XML_LOCALIZED));
 	g_free (tmp);
 
 	tmp = as_metadata_components_to_distro_xml (metad);
-	g_assert_cmpstr (tmp, ==, EXPECTED_XML_DISTRO);
+	g_assert (as_test_compare_lines (tmp, EXPECTED_XML_DISTRO));
 	g_free (tmp);
 }
 
@@ -492,7 +492,7 @@
 	as_component_add_language (cpt, "en_GB", 98);
 
 	res = as_xml_test_serialize (cpt, AS_PARSER_MODE_UPSTREAM);
-	g_assert_cmpstr (res, ==, expected_lang_xml);
+	g_assert (as_test_compare_lines (res, expected_lang_xml));
 }
 
 /**
